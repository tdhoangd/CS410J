/*! valenceui version 0.0.2 */
!function(a,b){var c={},d={};c.addClassInitializer=function(a,b){void 0===d[a]&&(d[a]=[]),d[a].push(b)},c.applyClassInitializers=function(a){c.applyClassFunctions(d,a)},c.applyClassFunctions=function(a,c){function d(b,c){for(var d=0;d<a[e].length;d++)a[e][d].call(a[e][d],c)}for(var e in a)b(c).find("."+e).addBack("."+e).each(d)},a.vui=c,b(document).on("vui-viewrender",function(a){c.applyClassInitializers(a.target)}).on("vui-finish",function(){c.applyClassInitializers(document)})}(window,window.jQuery),function(a){a.widget("vui.vui_accordion",{options:{},_create:function(){var b=this,c=a(this.element),d=c.attr("data-display-mode");"stacked"!==d&&(d="accordion"),this.option("displayMode",d),c.attr("role","tablist").attr("aria-multiselectable","accordion"!==d),a.each(c.find(".vui-accordion-header"),function(d,e){b._initializePanel(c,a(e),0===d)})},_setOption:function(b,c){"displayMode"===b&&(c="stacked"===c?"stacked":"accordion",a(this.element).attr("data-display-mode",c)),a.Widget.prototype._setOption.apply(this,arguments)},collapseAll:function(){var b=this;a.each(a(this.element).find(".vui-accordion-header"),function(c,d){b._collapsePanel(a(d))})},_collapsePanel:function(b){if(b.hasClass("vui-accordion-panel-expanded")){a(this.element).trigger("collapsePanel",{header:b.get(0)}),b.attr("aria-expanded","false").removeClass("vui-accordion-panel-expanded"),this._updateIcon(b,!1);var c=b.attr("data-content-id"),d=document.getElementById(c);null!==d&&a(d).attr("aria-hidden","true").attr("visibility","hidden").slideUp(250,"swing")}},_expandPanel:function(b){var c=a(this.element);"accordion"===this.option("displayMode")&&c.vui_accordion("collapseAll"),c.trigger("expandPanel",{header:b.get(0),isFirstExpand:!b.data("hasExpanded")}),b.attr("aria-expanded","true").addClass("vui-accordion-panel-expanded").data("hasExpanded",!0),this._updateIcon(b,!0);var d=b.attr("data-content-id"),e=document.getElementById(d);null!==e&&a(e).attr("aria-hidden","false").attr("visibility","visibile").slideDown(250,"swing")},_initializePanel:function(b,c,d){var e=this,f=e._tryGetContent(c);if(null!==f){var g=c.attr("data-content-id");f.get(0);var h="true"===c.attr("data-expanded"),i=c.attr("data-content-labelledby"),j=c.find(".vui-accordion-header-content:first-child"),k=0!==j.length,l=function(){c.hasClass("vui-accordion-panel-expanded")?e._collapsePanel(c):e._expandPanel(c)},m=!f.is(":empty");if(h||f.attr("visibility","hidden"),k){c.addClass("vui-accordion-header-interactive");var n=document.createElement("div");n.className="vui-accordion-toggle";var o=n.appendChild(document.createElement("div"));o.className=h?"vui-accordion-toggle-icon vui-icon-expanded":"vui-accordion-toggle-icon vui-icon-collapsed",c.prepend(n)}c.attr("role","tab").attr("aria-controls",g).attr("aria-expanded",h).attr("aria-selected",d?"true":"false").attr("tabindex",d?"0":"-1").css("padding",k?"0":"auto").data("hasExpanded",h).removeAttr("data-expanded").click(function(b){if(m){for(var d=b.target;d!==c.get(0)&&null!==d;){if(d===j.get(0)||a(d).is(":focusable"))return;d=d.parentNode}l()}}).focus(function(){c.addClass("vui-accordion-header-active"),f.addClass("vui-accordion-content-active")}).blur(function(){c.removeClass("vui-accordion-header-active"),f.removeClass("vui-accordion-content-active")}).keydown(function(a){return a.keyCode>=35&&a.keyCode<=40||32==a.keyCode?(a.preventDefault(),!1):!0}).keyup(function(a){if(13===a.keyCode||32===a.keyCode){if(!m)return;l()}else 39===a.keyCode||40===a.keyCode?e._focusPanel(c,e._tryGetNextPanel(c)):37===a.keyCode||38===a.keyCode?e._focusPanel(c,e._tryGetPreviousPanel(c)):35===a.keyCode?e._focusPanel(c,e._getLastPanelHeader()):36===a.keyCode&&e._focusPanel(c,e._getFirstPanelHeader())}),m||c.attr("aria-disabled","true").addClass("vui-accordion-header-disabled"),f.attr("role","tabpanel").attr("aria-labelledby",i).attr("aria-hidden","true"),h&&("accordion"===this.option("displayMode")&&a.each(b.find(".vui-accordion-panel-expanded"),function(b,c){e._collapsePanel(a(c))}),c.addClass("vui-accordion-panel-expanded"),setTimeout(function(){b.trigger("expandPanel",{header:c.get(0),isFirstExpand:!0})},0),f.attr("aria-hidden","false").show())}},_focusPanel:function(a,b){null!==b&&(a.attr("tabindex","-1").attr("aria-selected","false"),b.attr("tabindex","0").attr("aria-selected","true").focus())},_getFirstPanelHeader:function(){var b=a(this.element).find(".vui-accordion-header");return a(b[0])},_getLastPanelHeader:function(){var b=a(this.element).find(".vui-accordion-header");return a(b[b.length-1])},_tryGetContent:function(b){var c=b.attr("data-content-id");if(void 0!==c){var d=document.getElementById(c);return null!==d?a(d):null}var e=b.next(".vui-accordion-content");return 0!==e.length?(c=e.attr("id"),void 0===c&&(e.uniqueId(),c=e.attr("id")),b.attr("data-content-id",c),e):null},_tryGetPreviousPanel:function(a){var b=a.prev();return 0===b.length?this._getLastPanelHeader():b.hasClass("vui-accordion-header")?b:this._tryGetPreviousPanel(b)},_tryGetNextPanel:function(a){var b=a.next();return 0===b.length?this._getFirstPanelHeader():b.hasClass("vui-accordion-header")?b:this._tryGetNextPanel(b)},_updateIcon:function(a,b){var c=a.find(".vui-accordion-toggle-icon");c.length>0&&(b?(c.addClass("vui-icon-expanded"),c.removeClass("vui-icon-collapsed")):(c.addClass("vui-icon-collapsed"),c.removeClass("vui-icon-expanded")))}}),vui.addClassInitializer("vui-accordion",function(b){a(b).vui_accordion()})}(window.jQuery),function(a){a.widget("vui.vui_button",{_create:function(){var b=a(this.element),c=b.children(".vui-offscreen").text(),d=b.prop("title"),e=void 0!==d&&d.length>0;if(c.length>0&&!e&&(this.element.data("autoUpdateTitleWithText",!0),b.prop("title",c)),b.is("a")){var f=b.hasClass("vui-disabled");b.attr("role","button").prop("tabIndex",f?-1:0).bind("keypress",function(a){13===a.keyCode&&b.trigger("click")}),f&&b.attr("aria-disabled","true")}},getText:function(){var b,c=a(this.element);return b=c.is("input")?c.val().trim():c.text().trim()},isEnabled:function(){var b,c=a(this.element);return b=c.is("a")?!c.hasClass("vui-disabled"):void 0===c.attr("disabled")},processingEnd:function(){var a=this.element.data("originalText")||this.getText();return this.setText(a),this.setIsEnabled(!0),this},processingStart:function(){this.setIsEnabled(!1),this.element.data("originalText",this.getText());var a=this.element.attr("data-processing-text");return void 0!==a&&a.length>0&&this.setText(a),this},setIsEnabled:function(b){var c=a(this.element);return c.is("a")?c.toggleClass("vui-disabled",!b).attr("aria-disabled",b?"false":"true").prop("tabIndex",b?0:-1):b?c.removeAttr("disabled"):c.attr("disabled","disabled"),this},setText:function(b){if(this.element.data("autoUpdateTitleWithText")&&this.element.prop("title",b),this.element.is("input"))return this.element.val(b),void 0;var c=this.element.children(".vui-offscreen");return 1===c.length?(a(c[0]).text(b),void 0):(this.element.contents().filter(function(){return 3===this.nodeType}).remove(),this.element.append(document.createTextNode(b)),void 0)}}),vui.addClassInitializer("vui-button",function(b){a(b).vui_button()})}(window.jQuery),function(a){a.widget("vui.vui_link",{_create:function(){var b=a(this.element),c=b.children(".vui-offscreen").text(),d=b.prop("title"),e=void 0!==d&&d.length>0;c.length>0&&!e&&(this.element.data("autoUpdateTitleWithText",!0),b.prop("title",c))},getText:function(){var b,c=a(this.element);return b=c.text().trim()},setText:function(b){this.element.data("autoUpdateTitleWithText")&&this.element.prop("title",b);var c=this.element.children(".vui-offscreen");return 1===c.length?(a(c[0]).text(b),void 0):(this.element.contents().filter(function(){return 3===this.nodeType}).remove(),this.element.append(document.createTextNode(b)),void 0)}}),vui.addClassInitializer("vui-link",function(b){a(b).vui_link()})}(window.jQuery),function(a){a.widget("vui.vui_scrollSpy",{options:{disabled:!1},_create:function(){var b=this,c=a(this.element);c.on("scroll",function(a){b._doSpy(c,a)}),c.on("resize",function(a){b._doSpy(c,a)}),a(document).on("touchmove",function(a){b._doSpy(c,a)}),a(document).on("MSPointerMove",function(a){b._doSpy(c,a)}),a(document).on("vui-viewrender",function(a){b._doSpy(c,a)}),setTimeout(function(){b._doSpy(c)},0)},destroy:function(){a(this.element).off("vui-spy").data("scrollPoints",[])},_doSpy:function(a,b){var c=this,d=function(){var b=a.scrollTop(),c=b+a.height();return{top:b,bottom:c}};if(!c.options.disabled){var e=a.data("scrollPoints");if(e){document.body;for(var f=d(),g=function(e,f){setTimeout(function(){var g=d();if(!c.options.disabled){var h={isVisible:f,event:b,key:e.attr("data-spy-key"),node:e.get(0)};e.data("spy-isSpied")||(e.data("spy-isSpied",!0),a.trigger("vui-skim-spy",h),e.addClass("vui-scroll-point-skim-visible")),c._isScrollPointBottomVisible(g,e)===f&&(f&&e.hasClass("vui-scroll-point-visible")||(f||e.hasClass("vui-scroll-point-visible"))&&(h.isVisible=f,f?e.addClass("vui-scroll-point-visible"):e.removeClass("vui-scroll-point-visible"),a.trigger("vui-spy",h)))}},e.data("spy-time"))},h=e.length-1;h>=0;--h)if(e[h].closest("body")){var i=c._isScrollPointBottomVisible(f,e[h]);i&&!e[h].hasClass("vui-scroll-point-visible")?g(e[h],!0):!i&&e[h].hasClass("vui-scroll-point-visible")&&g(e[h],!1)}else a.data("scrollPoints").splice(h,1)}}},isVisible:function(b){return a(b).hasClass("vui-scroll-point-visible")},_isScrollPointBottomVisible:function(a,b){var c,d,e,f=b.offset().top+b.height();return e=a.bottom-a.top,d=a.top+e,c=f>=a.top&&d>=f},isScrollPointRegistered:function(b){var c=a(this.element),d=c.data("scrollPoints");if(void 0===d||0===d.length)return!1;for(var e=0;d[e];e++)if(d[e].get(0)===b)return!0;return!1},registerScrollPoint:function(b){if(!this.isScrollPointRegistered(b)){var c=a(this.element),d=c.data("scrollPoints");void 0===d&&(d=[],c.data("scrollPoints",d));var e=a(b);d.push(e.data("spy-time",void 0!==e.attr("data-spy-time")?parseInt(e.attr("data-spy-time"),10):3e3))}},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"disabled"===b&&c!==!0&&this._doSpy(a(this.element))}}),vui.addClassInitializer("vui-scroll-point",function(b){a(window).vui_scrollSpy().vui_scrollSpy("registerScrollPoint",b)}),a(document).on("vui-viewrender",function(){}).on("vui-finish",function(){})}(window.jQuery),function(a){a(function(){a(document).trigger("vui-finish")})}(window.jQuery);